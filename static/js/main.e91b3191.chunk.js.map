{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/PopupWithForm.js","components/ImagePopup.js","utils/utils.js","utils/api.js","hooks/useFormAndValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/RequireAuth.js","components/InfoTooltip.js","components/FormAuth.js","components/Login.js","components/Register.js","hooks/useAuth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","email","handleLogout","pathname","useLocation","useState","href","text","linkProps","setLinkProps","useEffect","onClick","className","to","CurrentUserContext","React","createContext","Card","card","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","user","src","link","alt","name","title","onCardClick","type","onCardDelete","onCardLike","length","Main","props","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","Footer","Popup","closePopupOnEscButtonKeyDown","event","key","setOpenState","isOpen","document","addEventListener","removeEventListener","target","currentTarget","classList","contains","children","PopupWithForm","buttonText","setButtonText","ref","formRef","action","onSubmit","preventDefault","buttonWaitingText","result","Promise","then","res","finally","noValidate","isButtonDisabled","ImagePopup","handleError","err","console","error","Api","options","this","_options","url","queryParams","headers","fetch","baseUrl","ok","json","reject","status","_sendQuery","userInfo","method","body","JSON","stringify","cardId","api","authorization","useFormAndValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","e","value","validationMessage","closest","checkValidity","EditProfilePopup","useRef","current","onClose","onUpdateUser","onChange","placeholder","required","minLength","maxLength","EditAvatarPopup","inputRef","onUpdateAvatar","AddPlacePopup","onAddCard","RequireAuth","redirectTo","InfoTooltip","FormAuth","defaultErrorText","setStatus","isInfoTooltipOpen","setIsInfoTooltipOpen","handleSubmit","succesText","catch","password","disabled","additionalText","Login","Register","useAuth","emptyAuthInfo","navigate","useNavigate","authInfo","setAuthInfo","sendQuery","errorObject","message","handleGetUserInfo","token","getUserInfo","data","handleSignup","signup","handleSignin","signin","localStorage","setItem","checkToken","getItem","removeItem","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isImagePopupOpen","setIsImagePopupOpen","isCardDeleteConfirmPopupOpen","setIsCardDeleteConfirmPopupOpen","selectedCard","setSelectedCard","setCurrentUser","closeAllPopups","newUserInfo","setCards","getInitialCards","Provider","path","element","setStateLike","newCard","state","c","patchUserInfo","newCardData","postCard","newLink","patchAvatar","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e91b3191.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nfunction Header({loggedIn, email, handleLogout}) {\n\n  const { pathname } = useLocation();\n  const [ linkProps, setLinkProps ] = useState({href: '', text: ''})\n\n  useEffect(() => {\n    if (pathname === '/sign-in') {\n      setLinkProps({\n        href: '/sign-up',\n        text: 'Регистрация',\n      })\n    } else if (loggedIn) {\n      setLinkProps({\n        href: '/sign-in',\n        text: 'Выйти',\n        onClick: handleLogout\n      })\n    } else {\n      setLinkProps({\n        href: '/sign-in',\n        text: 'Войти'\n      })\n    }\n  }, [pathname, loggedIn, handleLogout])\n\n  return (\n    <header className=\"header\">\n      <Link to=\"/\" className=\"header__logo\" aria-label=\"Перейти на главную\"></Link>\n      <div className=\"space\"></div>\n      <p className=\"header__info\">{email}</p>\n      <Link to={linkProps.href} onClick={linkProps.onClick} className=\"header__link button\">{linkProps.text}</Link>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import { useContext } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card(card) {\n\n  //Данные профиля\n  const currentUser = useContext(CurrentUserContext);\n\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = (card.owner._id === currentUser._id);\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some(user => user._id === currentUser._id);\n\n  function handleClick() {\n    card.onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    card.onCardLike(card, isLiked);\n  }\n\n  function handleDeleteClick() {\n    card.onCardDelete(card);\n  }\n\n  return (\n    <li className=\"place\">\n      <img className=\"place__image\" src={card.link} alt={card.name} title={`Добавил ${card.owner.name}`} onClick={handleClick} />\n      <h2 className=\"place__caption\">{card.name}</h2>\n      {isOwn? <button className=\"place__delete button\" type=\"button\" aria-label=\"Удалить\" title=\"Удалить\" onClick={handleDeleteClick} ></button>: ''}\n      <div className=\"place__like-container\">\n        <button className={`place__like ${isLiked? 'place__like_active': ''} button`} onClick={handleLikeClick} type=\"button\" aria-label=\"Нравится\" title=\"Нравится\"></button>\n        <p className=\"place__like-counter\">{card.likes.length}</p>\n      </div>\n    </li>\n  );\n}\n\nexport default Card;\n","import { useContext } from \"react\";\n\nimport Card from \"./Card\";\n\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Main(props) {\n\n  //Данные профиля\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main className=\"root__content\">\n      <section className=\"profile root__profile\">\n        <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар нашего героя\" />\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button className=\"profile__edit button\" type=\"button\" aria-label=\"Редактировать профиль\" onClick={props.onEditProfile}></button>\n          <p className=\"profile__position\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__add-place button\" type=\"button\" aria-label=\"Добавить карточку места\" onClick={props.onAddPlace}></button>\n      </section>\n      <section className=\"root__places\">\n        <ul className=\"places\">\n          {props.cards.map(card => (\n            <Card\n              key={card._id}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n              {...card}\n            />)\n          )}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","function Footer(props) {\n  return (\n    <footer className=\"footer root__footer\">\n      <p className=\"footer__copyright\">&copy; 2021 Николай Широков</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import { useEffect } from \"react\";\r\n\r\nfunction Popup(props) {\r\n\r\n  function closePopupOnEscButtonKeyDown(event) {\r\n    if (event.key === 'Escape') {\r\n      props.setOpenState(false);\r\n    }\r\n  }\r\n\r\n  function handleClosePopup(event) {\r\n\r\n    if (!(event.target === event.currentTarget || event.target.classList.contains('popup__close'))) {\r\n      return;\r\n    };\r\n    props.setOpenState(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (props.isOpen) {\r\n      document.addEventListener('keydown', closePopupOnEscButtonKeyDown);\r\n    } else {\r\n      document.removeEventListener('keydown', closePopupOnEscButtonKeyDown);\r\n    }\r\n  }, [props.isOpen])\r\n\r\n  return (\r\n    <div className={`popup ${props.isOpen?\"popup_opened\":\"\"}`} onClick={handleClosePopup}>\r\n      <div className=\"popup__container\">\r\n        <button className=\"popup__close button\" type=\"button\" aria-label=\"Закрыть\"></button>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Popup;\r\n","import { useState } from \"react\";\nimport Popup from \"./Popup\";\n\nfunction PopupWithForm(props) {\n\n  const [buttonText, setButtonText] = useState(props.buttonText)\n\n  function handleSubmitForm(event) {\n    event.preventDefault();\n    if (!props.onSubmit) {\n      return;\n    }\n    setButtonText(props.buttonWaitingText ? props.buttonWaitingText : props.buttonText);\n    const result = props.onSubmit(event);\n    if (result instanceof Promise) {\n      result.then(res => props.setOpenState(false));\n      result.finally(res => setButtonText(props.buttonText));\n    }\n  }\n\n  return (\n    <Popup {...props}>\n      <form ref={props.formRef} className=\"form\" action=\"post\" name={`form-${props.name}`} onSubmit={handleSubmitForm} noValidate>\n        <h2 className=\"form__title\">{props.title}</h2>\n        {props.children}\n        <button className={`form__submit ${props.isButtonDisabled ? 'form__submit_disabled' : ''} button`} type=\"submit\">{buttonText}</button>\n      </form>\n    </Popup >\n  );\n}\n\nexport default PopupWithForm;\n","import Popup from \"./Popup\";\n\nfunction ImagePopup(props) {\n  return (\n    <Popup {...props}>\n      <figure className=\"figure\">\n        <img className=\"figure__image\" src={props.card.link} alt={props.card.name} />\n        <figcaption className=\"figure__caption\">{props.card.name}</figcaption>\n      </figure>\n    </Popup>\n  );\n}\n\nexport default ImagePopup;\n","export function handleError(err) {\n  console.error(err);\n}\n","class Api {\n\n  constructor(options) {\n    this._options = options;\n  }\n\n  _sendQuery(url, queryParams = {}) {\n    queryParams.headers = this._options.headers;\n    return fetch(`${this._options.baseUrl}/${url}`, queryParams)\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  getInitialCards() {\n    return this._sendQuery('cards');\n  }\n\n  getUserInfo() {\n    return this._sendQuery('users/me');\n  }\n\n  patchUserInfo(userInfo) {\n    const queryParams = {\n      method: 'PATCH',\n      body: JSON.stringify({\n        name: userInfo.name,\n        about: userInfo.about\n      })\n    }\n    return this._sendQuery('users/me', queryParams);\n  }\n\n  patchAvatar(link) {\n    const queryParams = {\n      method: 'PATCH',\n      body: JSON.stringify({\n        avatar: link\n      })\n    }\n    return this._sendQuery('users/me/avatar', queryParams);\n  }\n\n  postCard(card) {\n    const queryParams = {\n      method: 'POST',\n      body: JSON.stringify({\n        name: card.name,\n        link: card.link\n      })\n    }\n    return this._sendQuery('cards', queryParams);\n  }\n\n  deleteCard(cardId) {\n    const queryParams = {\n      method: 'DELETE',\n    }\n    return this._sendQuery(`cards/${cardId}`, queryParams);\n  }\n\n  setStateLike(cardId, isLiked) {\n    const method = isLiked? 'DELETE': 'PUT';\n    const queryParams = {\n      method: method,\n    }\n    return this._sendQuery(`cards/likes/${cardId}`, queryParams);\n  }\n\n}\n\n// Инициализация АПИ\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-28',\n  headers: {\n    authorization: '720b9ff8-fdb3-4425-b748-9e049f638fb6',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n","import {useState, useCallback} from 'react';\n\nexport function useFormAndValidation() {\n  const [ values, setValues ] = useState({});\n  const [ errors, setErrors ] = useState({});\n  const [ isValid, setIsValid ] = useState(false);\n\n  const handleChange = (e) => {\n    const {name, value} = e.target;\n    setValues({...values, [name]: value });\n    setErrors({...errors, [name]: e.target.validationMessage});\n    setIsValid(e.target.closest('form').checkValidity());\n  };\n\n  const resetForm = useCallback((newValues = {}, newErrors = {}, newIsValid = false) => {\n    setValues(newValues);\n    setErrors(newErrors);\n    setIsValid(newIsValid);\n  }, [setValues, setErrors, setIsValid]);\n\n  return { values, handleChange, errors, isValid, resetForm, setValues, setIsValid };\n}\n","import { useContext, useEffect, useRef } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { useFormAndValidation } from \"../hooks/useFormAndValidation\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditProfilePopup(props) {\n\n  const { values, handleChange, errors, isValid, resetForm } = useFormAndValidation();\n  const formRef = useRef();\n\n  const currentUser = useContext(CurrentUserContext);\n  // После загрузки текущего пользователя из API\n  // его данные будут использованы в управляемых компонентах.\n  useEffect(() => {\n    if (currentUser.name) {\n      const newValues = {\n        name: currentUser.name,\n        about: currentUser.about\n      }\n      resetForm(newValues, {}, formRef.current.checkValidity());\n    }\n  }, [currentUser, props.isOpen, resetForm]);\n\n  function handleSubmit() {\n    // Передаём значения управляемых компонентов во внешний обработчик\n    const result = props.onUpdateUser({\n      name: values.name,\n      about: values.about,\n    });\n    return result;\n  }\n\n  return (\n    <PopupWithForm\n      {...props}\n      title=\"Редактировать профиль\"\n      name=\"edit-profile\"\n      formRef={formRef}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      isButtonDisabled={!isValid}\n      buttonText=\"Сохранить\"\n      buttonWaitingText=\"Сохранение...\"\n    >\n      <fieldset className=\"form__fields\">\n        <label className=\"form__field\">\n          <input value={values.name || ''} onChange={handleChange} className={`form__input ${!errors.name ? '' : 'form__input_type_error'}`} type=\"text\" name=\"name\" placeholder=\"Имя героя\" required minLength=\"2\" maxLength=\"40\" />\n          <span className={`form__input-error ${!errors.name ? '' : 'form__input-error_visible'}`}>{errors.name}</span>\n        </label>\n        <label className=\"form__field\">\n          <input value={values.about || ''} onChange={handleChange} className={`form__input ${!errors.about ? '' : 'form__input_type_error'}`} type=\"text\" name=\"about\" placeholder=\"Позиция героя в мире\" required minLength=\"2\" maxLength=\"200\" />\n          <span className={`form__input-error ${!errors.about ? '' : 'form__input-error_visible'}`}>{errors.about}</span>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import { useRef } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n\n  const inputRef = useRef();\n\n  function handleSubmit() {\n    const result = props.onUpdateAvatar(inputRef.current.value);\n    inputRef.current.value = '';\n    return result;\n  }\n\n  return (\n    <PopupWithForm\n      {...props}\n      title=\"Обновить аватар\"\n      name=\"edit-avatar\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      buttonText=\"Сохранить\"\n      buttonWaitingText=\"Сохренение...\"\n    >\n      <fieldset className=\"form__fields\">\n        <label className=\"form__field\">\n          <input ref={inputRef} className=\"form__input\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" required />\n          <span className=\"form__input-error\" data-input-name=\"link\"></span>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import { useEffect } from \"react\";\nimport { useFormAndValidation } from \"../hooks/useFormAndValidation\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n\n  const { values, handleChange, errors, isValid, resetForm } = useFormAndValidation()\n\n  function handleSubmit() {\n    const result = props.onAddCard({\n      name: values.name,\n      link: values.link,\n    });\n    return result;\n  }\n\n  useEffect(() => {\n    if (props.isOpen) {\n      resetForm();\n    };\n  }, [props.isOpen, resetForm])\n\n  return (\n    <PopupWithForm\n      {...props}\n      title=\"Новое место\"\n      name=\"add-place\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      isButtonDisabled={!isValid}\n      buttonText=\"Создать\"\n      buttonWaitingText=\"Создание...\"\n    >\n      <fieldset className=\"form__fields\">\n        <label className=\"form__field\">\n          <input value={values.name || ''} onChange={handleChange} className={`form__input ${!errors.name ? '' : 'form__input_type_error'}`} type=\"text\" name=\"name\" placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\" />\n          <span className={`form__input-error ${!errors.name ? '' : 'form__input-error_visible'}`} data-input-name=\"name\">{errors.name}</span>\n        </label>\n        <label className=\"form__field\">\n          <input value={values.link || ''} onChange={handleChange} className={`form__input ${!errors.link ? '' : 'form__input_type_error'}`} type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" required />\n          <span className={`form__input-error ${!errors.link ? '' : 'form__input-error_visible'}`} data-input-name=\"link\">{errors.link}</span>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import { Navigate } from \"react-router-dom\";\n\nfunction RequireAuth({ loggedIn, children, redirectTo }) {\n  return loggedIn ? children : <Navigate to={redirectTo} />;\n}\n\nexport default RequireAuth;\n","import Popup from \"./Popup\";\n\nfunction InfoTooltip(props) {\n  return (\n    <Popup {...props}>\n      <figure className=\"info-tooltip\">\n        <div className={`info-tooltip__icon ${props.ok? 'info-tooltip__icon_type_success': 'info-tooltip__icon_type_error'}`}></div>\n        <figcaption className=\"info-tooltip__text\">{props.text}</figcaption>\n      </figure>\n    </Popup>\n  );\n}\n\nexport default InfoTooltip;\n","import { useState } from \"react\";\nimport { useFormAndValidation } from \"../hooks/useFormAndValidation\";\nimport InfoTooltip from \"./InfoTooltip\";\n\nfunction FormAuth(props) {\n\n  const { values, handleChange, errors, isValid } = useFormAndValidation()\n\n  const defaultErrorText = 'Что-то пошло не так! Попробуйте ещё раз.';\n\n  const [ status, setStatus ] = useState({ok: false, text: defaultErrorText});\n  const [ isInfoTooltipOpen, setIsInfoTooltipOpen ] = useState(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    props.handleSubmit(values)\n      .then(res => {\n        setStatus({\n          ok: true,\n          text: props.succesText || 'Успешно!',\n        })\n        setIsInfoTooltipOpen(true);\n      })\n      .catch(err => {\n        setStatus({\n          ok: false,\n          text: err.text || defaultErrorText,\n        })\n        setIsInfoTooltipOpen(true);\n      })\n  }\n\n  return (\n    <>\n      <form className=\"form form_place_auth center\" action=\"post\" name={`form-${props.name}`} onSubmit={handleSubmit} noValidate>\n        <h2 className=\"form__title center\">{props.title}</h2>\n        <fieldset className=\"form__fields\">\n          <label className=\"form__field\">\n            <input value={values.email || ''} onChange={handleChange} className={`form__input form__input_place_auth ${!errors.email ? '' : 'form__input_type_error'}`} type=\"email\" name=\"email\" placeholder=\"Email\" required />\n            <span className={`form__input-error ${!errors.email ? '' : 'form__input-error_visible'}`}>{errors.email}</span>\n          </label>\n          <label className=\"form__field\">\n            <input value={values.password || ''} onChange={handleChange} className={`form__input form__input_place_auth ${!errors.password ? '' : 'form__input_type_error'}`} type=\"password\" name=\"password\" placeholder=\"Пароль\" required />\n            <span className={`form__input-error ${!errors.password ? '' : 'form__input-error_visible'}`}>{errors.password}</span>\n          </label>\n        </fieldset>\n        <div className=\"space\"></div>\n        <button className={`form__submit form__submit_place_auth ${!isValid ? 'form__submit_disabled' : ''} button`} type=\"submit\" disabled={!isValid}>{props.buttonText}</button>\n        {props.additionalText}\n      </form>\n      <InfoTooltip\n        isOpen={isInfoTooltipOpen}\n        setOpenState={setIsInfoTooltipOpen}\n        {...status}\n      />\n    </>\n  );\n}\n\nexport default FormAuth;\n","import FormAuth from \"./FormAuth\";\n\nfunction Login(props) {\n\n  return (\n    <FormAuth\n      {...props}\n      name=\"login\"\n      title=\"Вход\"\n      buttonText=\"Вход\"\n      additionalText={<p className=\"form__additional-text center\"></p>}\n    />\n  );\n}\n\nexport default Login;\n","import { Link } from \"react-router-dom\";\nimport FormAuth from \"./FormAuth\";\n\nfunction Register(props) {\n\n  return (\n    <FormAuth\n      {...props}\n      name=\"register\"\n      title=\"Регистрация\"\n      buttonText=\"Зарегистрироваться\"\n      succesText=\"Вы успешно зарегистрировались!\"\n      additionalText={<p className=\"form__additional-text center\">Уже зарегистрированы? <Link className=\"form__link button\" to=\"/sign-in\">Войти</Link></p>}\n    />\n  );\n}\n\nexport default Register;\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router';\n\nexport function useAuth() {\n\n  const emptyAuthInfo = {\n    loggedIn: false,\n  }\n\n  const navigate = useNavigate();\n\n  const [authInfo, setAuthInfo] = useState(emptyAuthInfo);\n  const baseUrl = 'https://auth.nomoreparties.co';\n\n  const sendQuery = (url, queryParams) => {\n\n    if (!queryParams.headers) {\n      queryParams.headers = {}\n    }\n\n    queryParams.headers['Content-Type'] = 'application/json';\n\n    return fetch(`${baseUrl}/${url}`, queryParams)\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return res.json()\n          .then(errorObject => Promise.reject({text: errorObject.error? errorObject.error: errorObject.message}))\n      })\n\n  }\n\n  const signup = (userInfo) => {\n    const queryParams = {\n      method: 'POST',\n      body: JSON.stringify(userInfo),\n    }\n    return sendQuery('signup', queryParams)\n  }\n\n  const signin = (userInfo) => {\n    const queryParams = {\n      method: 'POST',\n      body: JSON.stringify(userInfo),\n    }\n    return sendQuery('signin', queryParams)\n  }\n\n  const getUserInfo = (token) => {\n    const queryParams = {\n      method: 'GET',\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      },\n    }\n    return sendQuery('users/me', queryParams)\n  }\n\n  const handleSignup = (userInfo) => {\n    return signup(userInfo)\n      .then(res => {\n        /* handleSignin(userInfo); */\n      })\n  }\n\n  const handleSignin = (userInfo) => {\n    return signin(userInfo)\n      .then(res => {\n        if (res.token) {\n          localStorage.setItem('token', res.token);\n          handleGetUserInfo(res.token);\n        }\n      })\n  }\n\n  const handleGetUserInfo = (token) => {\n    return getUserInfo(token)\n      .then(res => {\n        setAuthInfo({\n          ...authInfo,\n          loggedIn: true,\n          email: res.data.email,\n        });\n        navigate('/')\n      })\n  }\n\n  const checkToken = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      handleGetUserInfo(token)\n    }\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setAuthInfo(emptyAuthInfo);\n  }\n\n  return { authInfo, setAuthInfo, handleSignup, handleSignin, checkToken, handleLogout };\n}\n","import Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\n\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\n\nimport { useState, useEffect } from \"react\";\nimport { handleError } from \"../utils/utils\";\nimport api from \"../utils/api\";\n\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { Route, Routes } from \"react-router-dom\";\nimport RequireAuth from \"./RequireAuth\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport { useAuth } from \"../hooks/useAuth\";\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isCardDeleteConfirmPopupOpen, setIsCardDeleteConfirmPopupOpen] = useState(false);\n\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n\n  const { authInfo, handleSignup, handleSignin, checkToken, handleLogout } = useAuth();\n\n  useEffect(() => {\n\n    checkToken();\n\n    // Загрузка данных профиля с сервера\n    api.getUserInfo()\n      .then(newUserInfo => {\n        setCurrentUser(newUserInfo)\n      })\n      .catch(handleError);\n\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n\n    setIsImagePopupOpen(false);\n\n    setIsCardDeleteConfirmPopupOpen(false);\n\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n\n  function handleUpdateUser(newUserInfo) {\n    return api.patchUserInfo(newUserInfo)\n      .then(res => {\n        setCurrentUser(res);\n        /*         setIsEditProfilePopupOpen(false); */\n      })\n      .catch(handleError)\n  }\n\n  function handleUpdateAvatar(newLink) {\n    return api.patchAvatar(newLink)\n      .then(res => {\n        setCurrentUser(res);\n        /*         setIsEditAvatarPopupOpen(false); */\n      })\n      .catch(handleError)\n  }\n\n  //Карточки\n  const [cards, setCards] = useState([]);\n\n  //Разовые действия при монтированнии/демонтировании компонента\n  useEffect(() => {\n\n    // Загрузка коллекции карточек с сервера\n    api.getInitialCards()\n      .then(data => {\n        setCards(data);\n      })\n      .catch(handleError);\n\n  }, []);\n\n  function handleCardLike(card, isLiked) {\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.setStateLike(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(handleError);\n  }\n\n  function handleCardDeleteClick(card) {\n    setSelectedCard(card);\n    setIsCardDeleteConfirmPopupOpen(true);\n  }\n\n  function handleCardDelete() {\n\n    return api.deleteCard(selectedCard._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== selectedCard._id));\n        /*         setIsCardDeleteConfirmPopupOpen(false) */\n      })\n      .catch(handleError);\n  }\n\n  function handleAddCard(newCardData) {\n    return api.postCard(newCardData)\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        /*         setIsAddPlacePopupOpen(false); */\n      })\n      .catch(handleError)\n  }\n\n  return (\n    <div className=\"wrapper\">\n\n      <CurrentUserContext.Provider value={currentUser}>\n\n        <Header handleLogout={handleLogout} {...authInfo} />\n\n        <Routes>\n          <Route\n            path=\"/sign-up\"\n            element={\n              <Register handleSubmit={handleSignup} />\n            }\n          />\n          <Route\n            path=\"/sign-in\"\n            element={\n              <Login handleSubmit={handleSignin} />\n            }\n          />\n          <Route\n            path=\"/*\"\n            element={\n              <RequireAuth {...authInfo} redirectTo=\"/sign-in\">\n                <Main\n                  onEditAvatar={handleEditAvatarClick}\n                  onEditProfile={handleEditProfileClick}\n                  onAddPlace={handleAddPlaceClick}\n                  cards={cards}\n                  onCardClick={handleCardClick}\n                  onCardLike={handleCardLike}\n                  onCardDelete={handleCardDeleteClick}\n                />\n\n                <Footer />\n\n                <EditProfilePopup\n                  isOpen={isEditProfilePopupOpen}\n                  onClose={closeAllPopups}\n                  onUpdateUser={handleUpdateUser}\n                  setOpenState={setIsEditProfilePopupOpen}\n                />\n\n                <AddPlacePopup\n                  isOpen={isAddPlacePopupOpen}\n                  onClose={closeAllPopups}\n                  onAddCard={handleAddCard}\n                  setOpenState={setIsAddPlacePopupOpen}\n                />\n\n                <EditAvatarPopup\n                  isOpen={isEditAvatarPopupOpen}\n                  onClose={closeAllPopups}\n                  onUpdateAvatar={handleUpdateAvatar}\n                  setOpenState={setIsEditAvatarPopupOpen}\n                />\n\n                <PopupWithForm\n                  isOpen={isCardDeleteConfirmPopupOpen}\n                  onClose={closeAllPopups}\n                  onSubmit={handleCardDelete}\n                  title=\"Вы уверены?\"\n                  name=\"accept\"\n                  buttonText=\"Да\"\n                  buttonWaitingText=\"Удаление...\"\n                  setOpenState={setIsCardDeleteConfirmPopupOpen}\n                />\n\n                <ImagePopup\n                  card={selectedCard}\n                  isOpen={isImagePopupOpen}\n                  onClose={closeAllPopups}\n                  setOpenState={setIsImagePopupOpen}\n                />\n              </RequireAuth>\n            } />\n        </Routes>\n      </CurrentUserContext.Provider>\n\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}